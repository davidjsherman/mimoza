function formatLink(a){if(a){return"<a href='?id="+a+"' target='_blank'>Zoom inside</a>"}return""}function p(a){return"<p class='popup centre'>"+a+"</p>"}function i(a){return"<span class='explanation'>"+a+"</span>"}function getPopup(j,c,h){if(EDGE==j.properties.type){return}var f="<h2>"+j.properties.name+"</h2>"+p(i("id: ")+j.properties.id);if(REACTION==j.properties.type){var d=j.properties.tr?p(i("Is a transport reaction.")):"",b=j.properties.term?p(j.properties.term):"",g=j.properties.f?p(j.properties.f):"";f+=g+b+d}else{if(SPECIES==j.properties.type){var a=j.properties.term?p(j.properties.term):"",e=p(i("compartment: ")+j.properties.c_name);f+=e+a}else{if(COMPARTMENT==j.properties.type){f+=j.properties.term?p(j.properties.term):"";f+=p(formatLink(j.properties.id))}}}return L.popup({autoPan:true,keepInView:true,maxWidth:c,maxHeight:h,autoPanPadding:[1,1]}).setContent(f)}function getLabel(b){if(EDGE==b.properties.type){return null}var a="<h2>"+b.properties.name+"</h2>"+p(i("id: ")+b.properties.id);if(REACTION==b.properties.type){var f=b.properties.tr?p(i("Is a transport reaction.")):"",e=b.properties.f?p(b.properties.f):"";a+=e+f}if(SPECIES==b.properties.type){var d=b.properties.tr?p(i("Participates in a transport reaction.")):"",c=p(i("compartment: ")+b.properties.c_name);a+=c+d}return a}function highlightCircle(b,a){return L.circle(b,a,{color:"#fff700",fillColor:"#fff700",fillOpacity:0.7,opacity:1,weight:2,fill:true,clickable:false})}function search(g,a,f,c){var e=$("#tags_"+c).val();if(e&&a.hasOwnProperty(e)){var d=g.getZoom(),b=f[e];if(b[0]>d){g.setZoom(b[0])}else{if(d>b[1]){g.setZoom(b[1])}}a[e].openOn(g)}}function add(c,a,b){if(c.hasOwnProperty(a)){c[a].push(b)}else{c[a]=[b]}};